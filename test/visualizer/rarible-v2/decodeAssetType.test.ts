import { ZERO_ADDRESS } from "../../../src/utils";
import { decodeAssetType } from "../../../src/visualizer/rarible-v2/decodeAssetType";

describe("decodeAssetType", () => {
  it("should decode ETH asset type", () => {
    const assetType = {
      assetClass: "0xaaaebeba",
      data: "0x",
    };

    const result = decodeAssetType(assetType);

    expect(result).toEqual({
      type: "NATIVE",
      address: ZERO_ADDRESS,
    });
  });

  it("should decode ERC20 asset type", () => {
    const assetType = {
      assetClass: "0x8ae85d84",
      data: "0x00000000000000000000000044953ab2e88391176576d49ca23df0b8acd793be",
    };

    const result = decodeAssetType(assetType);

    expect(result).toEqual({
      type: "ERC20",
      address: "0x44953ab2e88391176576d49cA23df0B8ACD793be",
    });
  });

  it("should decode ERC721 asset type", () => {
    const assetType = {
      assetClass: "0x73ad2146",
      data: "0x000000000000000000000000b47e3cd837ddf8e4c57f05d70ab865de6e193bbb0000000000000000000000000000000000000000000000000000000000000001",
    };
    const result = decodeAssetType(assetType);

    expect(result).toEqual({
      type: "ERC721",
      address: "0xb47e3cd837dDF8e4c57F05d70Ab865de6e193BBB",
      id: "1",
    });
  });

  it("should decode ERC721_LAZY asset type", () => {
    const assetType = {
      assetClass: "0xd8f960c1",
      data: "0x00000000000000000000000044953ab2e88391176576d49ca23df0b8acd793be0000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000000e00000000000000000000000000000000000000000000000000000000000000180000000000000000000000000000000000000000000000000000000000000022000000000000000000000000000000000000000000000000000000000000000047465737400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000000000000000000000044953ab2e88391176576d49ca23df0b8acd793be000000000000000000000000000000000000000000000000000000000000006400000000000000000000000044953ab2e88391176576d49ca23df0b8acd793be0000000000000000000000000000000000000000000000000000000000000064000000000000000000000000000000000000000000000000000000000000000200000000000000000000000044953ab2e88391176576d49ca23df0b8acd793be000000000000000000000000000000000000000000000000000000000000006400000000000000000000000044953ab2e88391176576d49ca23df0b8acd793be0000000000000000000000000000000000000000000000000000000000000064000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000",
    };

    const result = decodeAssetType(assetType);

    expect(result).toEqual({
      type: "ERC721",
      address: "0x44953ab2e88391176576d49cA23df0B8ACD793be",
      id: "10",
    });
  });

  it("should decode ERC1155 asset type", () => {
    const assetType = {
      assetClass: "0x973bb640",
      data: "0x000000000000000000000000b47e3cd837ddf8e4c57f05d70ab865de6e193bbb0000000000000000000000000000000000000000000000000000000000000001",
    };
    const result = decodeAssetType(assetType);

    expect(result).toEqual({
      type: "ERC1155",
      address: "0xb47e3cd837dDF8e4c57F05d70Ab865de6e193BBB",
      id: "1",
    });
  });

  it("should decode ERC1155_LAZY asset type", () => {
    const assetType = {
      assetClass: "0x1cdfaa40",
      data: "0x00000000000000000000000044953ab2e88391176576d49ca23df0b8acd793be0000000000000000000000000000000000000000000000000000000000000040000000000000000000000000000000000000000000000000000000000000000a00000000000000000000000000000000000000000000000000000000000000c0000000000000000000000000000000000000000000000000000000000000000a000000000000000000000000000000000000000000000000000000000000010000000000000000000000000000000000000000000000000000000000000001a0000000000000000000000000000000000000000000000000000000000000024000000000000000000000000000000000000000000000000000000000000000047465737400000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000000000000000000000044953ab2e88391176576d49ca23df0b8acd793be000000000000000000000000000000000000000000000000000000000000006400000000000000000000000044953ab2e88391176576d49ca23df0b8acd793be0000000000000000000000000000000000000000000000000000000000000064000000000000000000000000000000000000000000000000000000000000000200000000000000000000000044953ab2e88391176576d49ca23df0b8acd793be000000000000000000000000000000000000000000000000000000000000006400000000000000000000000044953ab2e88391176576d49ca23df0b8acd793be0000000000000000000000000000000000000000000000000000000000000064000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000200000000000000000000000000000000000000000000000000000000000000000",
    };

    const result = decodeAssetType(assetType);

    expect(result).toEqual({
      type: "ERC1155",
      address: "0x44953ab2e88391176576d49cA23df0B8ACD793be",
      id: "10",
    });
  });

  it("should decode CRYPTO_PUNKS asset type", () => {
    const assetType = {
      assetClass: "0x3e6b89d4",
      data: "0x000000000000000000000000b47e3cd837ddf8e4c57f05d70ab865de6e193bbb0000000000000000000000000000000000000000000000000000000000000001",
    };
    const result = decodeAssetType(assetType);

    expect(result).toEqual({
      type: "ERC721",
      address: "0xb47e3cd837dDF8e4c57F05d70Ab865de6e193BBB",
      id: "1",
    });
  });

  it("should decode GEN_ART asset type", () => {
    const assetType = {
      assetClass: "0xa8c6716e",
      data: "0x00000000000000000000000044953ab2e88391176576d49ca23df0b8acd793be",
    };

    const result = decodeAssetType(assetType);

    expect(result).toEqual({
      type: "ERC721",
      address: "0x44953ab2e88391176576d49cA23df0B8ACD793be",
    });
  });

  it("should decode COLLECTION asset type", () => {
    const assetType = {
      assetClass: "0xf63c2825",
      data: "0x00000000000000000000000044953ab2e88391176576d49ca23df0b8acd793be",
    };

    const result = decodeAssetType(assetType);

    expect(result).toEqual({
      type: "ERC721",
      address: "0x44953ab2e88391176576d49cA23df0B8ACD793be",
    });
  });
});
